<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.9.0"><title>在 Windows 上安装 Rust - 西瓜星 🍉✨</title><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><script>!function(e,t,a,n){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var g=t.getElementsByTagName(a)[0],m=t.createElement(a);m.async=!0,m.src="https://www.googletagmanager.com/gtm.js?id=GTM-MTHFNXR",g.parentNode.insertBefore(m,g)}(window,document,"script","dataLayer")</script><link rel="shortcut icon" href="https://i.loli.net/2019/07/25/5d395161c152086154.png" type="image/png"><meta name="description" content="Rust 是由 Mozilla 主导开发的通用、编译型编程语言。设计准则为“安全、并发、实用”，支持函数式、并发式、过程式以及面向对象的编程风格。"><meta name="keywords" content="Rust"><meta property="og:type" content="article"><meta property="og:title" content="在 Windows 上安装 Rust"><meta property="og:url" content="http://suikastar.com/posts/18690/index.html"><meta property="og:site_name" content="西瓜星 🍉✨"><meta property="og:description" content="Rust 是由 Mozilla 主导开发的通用、编译型编程语言。设计准则为“安全、并发、实用”，支持函数式、并发式、过程式以及面向对象的编程风格。"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2019-08-02T11:19:41.074Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="在 Windows 上安装 Rust"><meta name="twitter:description" content="Rust 是由 Mozilla 主导开发的通用、编译型编程语言。设计准则为“安全、并发、实用”，支持函数式、并发式、过程式以及面向对象的编程风格。"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/css/mdui.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.9/build/styles/atom-one-dark.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://at.alicdn.com/t/font_1038733_0xvrvpg9c0r.css"><link rel="stylesheet" href="/css/style.css?v=1564745193987"><script src="/js/tools.js?v=1564745193987"></script></head><body class="mdui-drawer-body-left"><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MTHFNXR" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><script>var url=get_img_url({default:{url:"https://i.loli.net/2019/07/29/5d3eb2c5ae5f362548.jpg",w:16,h:9},interval:{"6-16":{url:"https://i.loli.net/2019/07/29/5d3eb2c5ae5f362548.jpg",w:16,h:9},"16-19":{url:"https://i.loli.net/2019/07/29/5d3eb2c4e6f2162194.jpg",w:16,h:9},"19-6":{url:"https://i.loli.net/2019/07/29/5d3eb2c5d473c66569.jpg",w:16,h:9}}});document.write('<div class="nexmoe-bg" style="background-image: url('+url+')"></div>')</script><div id="nexmoe-header"><div class="nexmoe-drawer mdui-drawer" id="drawer"><div class="nexmoe-avatar mdui-ripple"><a href="/"><img src="https://i.loli.net/2019/07/25/5d395161e70ae14470.jpg"></a></div><div class="nexmoe-count"><div><span>文章</span>3</div><div><span>标签</span>2</div><div><span>分类</span>2</div></div><ul class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}"><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/"><i class="mdui-list-item-icon nexmoefont icon-home"></i><div class="mdui-list-item-content">回到首页</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/about/"><i class="mdui-list-item-icon nexmoefont icon-info-circle"></i><div class="mdui-list-item-content">关于网站</div></a><a class="nexmoe-list-item mdui-list-item mdui-ripple" href="/links/"><i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i><div class="mdui-list-item-content">我的朋友</div></a></ul><aside id="nexmoe-sidebar"><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">社交</h3><div class="nexmoe-widget nexmoe-social"><a class="mdui-ripple" href="mailto:me@suikastar.com" target="_blank" mdui-tooltip="{content: '邮箱'}" style="color:#1da1f2;background-color:rgba(29,161,242,.1)"><i class="nexmoefont icon-mail-fill"></i></a></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">文章分类</h3><div class="nexmoe-widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/other/">其他</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/code/">编程</a><span class="category-list-count">2</span></li></ul></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">标签</h3><div class="nexmoe-widget tagcloud"><a href="/tags/rust/" style="font-size:20px">Rust</a> <a href="/tags/music/" style="font-size:10px">音乐</a></div></div><div class="nexmoe-widget-wrap"><h3 class="nexmoe-widget-title">文章归档</h3><div class="nexmoe-widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">2019年08月</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">2019年07月</a></li></ul></div></div></aside></div><script>var links=document.querySelectorAll(".nexmoe-list-item"),rootRealPath=getRealPath(window.location.pathname,!0);for(var key in links){var link=links[key];if("object"==typeof link){var linkPath=link.getAttribute("href");linkPath&&getRealPath(linkPath,!0)===rootRealPath&&(link.className="active nexmoe-list-item mdui-list-item mdui-ripple")}}</script></div><div id="nexmoe-content"><div class="nexmoe-primary"><div class="nexmoe-tab"><a mdui-drawer="{target: '#drawer', swipe: true}"><i class="mdui-icon material-icons">menu</i></a></div><div class="nexmoe-post"><div class="nexmoe-post-cover mdui-ripple"><script>var data=get_img_data({default:{url:"https://i.loli.net/2019/07/29/5d3eb2c5ae5f362548.jpg",w:16,h:9},interval:{"6-16":{url:"https://i.loli.net/2019/07/29/5d3eb2c5ae5f362548.jpg",w:16,h:9},"16-19":{url:"https://i.loli.net/2019/07/29/5d3eb2c4e6f2162194.jpg",w:16,h:9},"19-6":{url:"https://i.loli.net/2019/07/29/5d3eb2c5d473c66569.jpg",w:16,h:9}}}),url=data.url,percentage=100*data.ratio;document.write("<style>#img-responsive-cjytyyc7s00071w55hlauj5vv{max-width:100%;height:0;padding-bottom:"+percentage+'%;overflow:hidden;}</style><div id="img-responsive-cjytyyc7s00071w55hlauj5vv"><img src="'+url+'"></div>')</script><h1>在 Windows 上安装 Rust</h1></div><div class="nexmoe-post-meta"><a><i class="nexmoefont icon-calendar-fill"></i>2019年08月01日</a> <a><i class="nexmoefont icon-areachart"></i>590 字</a> <a><i class="nexmoefont icon-time-circle-fill"></i>大概 2 分钟</a> <a class="nexmoefont icon-appstore-fill -link" href="/categories/code/">编程</a> <a class="nexmoefont icon-tag-fill -link" href="/tags/rust/">Rust</a></div><article><p>Rust 是由 Mozilla 主导开发的通用、编译型编程语言。设计准则为“安全、并发、实用”，支持函数式、并发式、过程式以及面向对象的编程风格。</p><a id="more"></a><h2 id="安装-rustup"><a href="#安装-rustup" class="headerlink" title="安装 rustup"></a>安装 rustup</h2><h4 id="介绍-rustup"><a href="#介绍-rustup" class="headerlink" title="介绍 rustup"></a>介绍 rustup</h4><p>rustup 是一个用于管理 Rust 版本和相关工具的命令行工具，一般通过 rustup 来下载安装 Rust。</p><h4 id="下载-rustup"><a href="#下载-rustup" class="headerlink" title="下载 rustup"></a>下载 rustup</h4><p><a href="https://win.rustup.rs/" target="_blank" rel="noopener">官方下载</a></p><h2 id="安装-Rust"><a href="#安装-Rust" class="headerlink" title="安装 Rust"></a>安装 Rust</h2><p>运行下载好的 rustup 程序，会给出如下信息：</p><pre><code class="cmd">Welcome to Rust!

This will download and install the official compiler for the Rust programming
language, and its package manager, Cargo.

It will add the cargo, rustc, rustup and other commands to Cargo&#39;s bin
directory, located at:

  C:\Users\{username}\.cargo\bin

This path will then be added to your PATH environment variable by modifying the
HKEY_CURRENT_USER/Environment/PATH registry key.

You can uninstall at any time with rustup self uninstall and these changes will
be reverted.

Current installation options:

   default host triple: x86_64-pc-windows-msvc
     default toolchain: stable
  modify PATH variable: yes

1) Proceed with installation (default)
2) Customize installation
3) Cancel installation
&gt;</code></pre><ul><li>如果选择 1)，默认会安装基于 MSVC 的 Rust 版本<ul><li>需要配置 C++ build tools 环境</li></ul></li><li>如果选择 2)，用户可以选择安装基于 GNU 的 Rust 版本<ul><li>需要配置 MinGW 环境</li></ul></li></ul><h2 id="选择安装基于-MSVC-的-Rust-版本"><a href="#选择安装基于-MSVC-的-Rust-版本" class="headerlink" title="选择安装基于 MSVC 的 Rust 版本"></a>选择安装基于 MSVC 的 Rust 版本</h2><ol><li>选择 1) Proceed with installation (default)</li><li>…</li><li>配置 C++ build tools 环境</li></ol><h2 id="选择安装基于-GNU-的-Rust-版本"><a href="#选择安装基于-GNU-的-Rust-版本" class="headerlink" title="选择安装基于 GNU 的 Rust 版本"></a>选择安装基于 GNU 的 Rust 版本</h2><ol><li>选择 2) Customize installation</li><li>输入 x86_64-pc-windows-gnu</li><li>…</li><li>配置 MinGW 环境</li></ol><h2 id="配置-C-build-tools-环境"><a href="#配置-C-build-tools-环境" class="headerlink" title="配置 C++ build tools 环境"></a>配置 C++ build tools 环境</h2><p>打开 cmd 或 PowerShell 运行以下命令：</p><pre><code class="cmd">npm install --global windows-build-tools --vs2015</code></pre><ul><li>如果你的系统提示找不到 npm 命令，你可能需要安装 <a href="https://nodejs.org/dist/v10.16.1/node-v10.16.1-x64.msi" target="_blank" rel="noopener">nodejs</a>。</li></ul><h2 id="配置-MinGW-环境"><a href="#配置-MinGW-环境" class="headerlink" title="配置 MinGW 环境"></a>配置 MinGW 环境</h2><h4 id="介绍-msys2"><a href="#介绍-msys2" class="headerlink" title="介绍 msys2"></a>介绍 msys2</h4><p>msys2 是 Windows 上的一个软件发行和构建平台。自带 pacman 包管理系统，可以快速的下载安装各式各样的软件包。使用 MinGW-w64 工具链, 可以方便的构建本机 Windows 应用程序。</p><h4 id="下载安装-msys2"><a href="#下载安装-msys2" class="headerlink" title="下载安装 msys2"></a>下载安装 msys2</h4><p><a href="http://repo.msys2.org/distrib/x86_64/msys2-x86_64-20190524.exe" target="_blank" rel="noopener">官方下载</a></p><h4 id="安装软件包"><a href="#安装软件包" class="headerlink" title="安装软件包"></a>安装软件包</h4><p>打开 msys2.exe 运行以下命令：</p><pre><code class="cmd">pacman -S base-devel
pacman -S mingw-w64-x86_64-toolchain</code></pre><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>在 C:\Users\{username}\.cargo 目录下新建 config 文件，输入以下内容并保存：</p><pre><code class="toml">[target.x86_64-pc-windows-gnu]
linker = &quot;{msys2_path}/mingw64/bin/gcc.exe&quot;
ar = &quot;{msys2_path}/mingw64/bin/ar.exe&quot;</code></pre><ul><li>{msys2_path}：msys2 的安装目录，例如 D:/msys64</li><li>{username}：当前系统登录的用户名</li></ul><h4 id="One-More-Thing"><a href="#One-More-Thing" class="headerlink" title="One More Thing"></a>One More Thing</h4><p>你可能会在构建包含 C/C++ 代码的 Rust 程序上遇到一些问题：</p><pre><code class="cmd">undefined reference to `__imp___acrt_iob_func&#39;</code></pre><p>有关此问题的解决方案在<a href="/posts/18691/">这里</a>。</p></article></div><div class="nexmoe-copyright">&copy; 2019 suika Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="https://nexmoe.com/hexo-theme-nexmoe.html" target="_blank">Nexmoe</a></div></div></div><div id="nexmoe-footer"></div><script src="https://cdn.jsdelivr.net/npm/mdui@0.4.3/dist/js/mdui.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/smoothscroll-for-websites@1.4.9/SmoothScroll.min.js"></script><script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.9/build/highlight.min.js"></script><script>hljs.initHighlightingOnLoad()</script><script src="/js/app.js?v=1564745193972"></script></body></html>